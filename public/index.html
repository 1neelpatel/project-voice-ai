<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Project Voice AI</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 24px; max-width: 780px; }
      input, button { padding: 10px; font-size: 16px; }
      #log { white-space: pre-wrap; border: 1px solid #ddd; padding: 12px; border-radius: 10px; margin-top: 12px; min-height: 220px; }
      .row { display:flex; gap:10px; margin-top: 10px; }
      .row input { flex: 1; }
      .small { color:#666; font-size: 13px; margin-top: 8px; }
    </style>
  </head>
  <body>
    <h1>Project Voice AI</h1>

    <div class="row">
      <input id="msg" placeholder="Type a message…" />
      <button id="send">Send</button>
    </div>

    <div class="small">If the AI key is set correctly, you’ll see a real response below.</div>

    <div id="log"></div>

    <script>
      const log = document.getElementById("log");
      const msg = document.getElementById("msg");
      const send = document.getElementById("send");

      function addLine(text) {
        log.textContent += (log.textContent ? "\n\n" : "") + text;
      }

      async function sendMsg() {
        const text = msg.value.trim();
        if (!text) return;
        addLine("You: " + text);
        msg.value = "";

        const r = await fetch("/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: text })
        });

        const data = await r.json().catch(() => ({}));
        addLine("AI: " + (data.reply || ("Error: " + r.status)));
      }

      send.onclick = sendMsg;
      msg.addEventListener("keydown", (e) => { if (e.key === "Enter") sendMsg(); });
    </script>
  </body>
</html>
